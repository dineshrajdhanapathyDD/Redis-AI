import React, { useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Bell,\n  Search,\n  Settings,\n  User,\n  LogOut,\n  Moon,\n  Sun,\n  Menu,\n  Wifi,\n  WifiOff,\n  Activity,\n} from 'lucide-react';\nimport { useUIStore, useWebSocketStore } from '../../store';\nimport { useAuth } from '../../providers/AuthProvider';\nimport { useWebSocket } from '../../providers/WebSocketProvider';\n\nconst getPageTitle = (pathname: string): string => {\n  switch (pathname) {\n    case '/':\n      return 'Dashboard';\n    case '/search':\n      return 'Multi-Modal Search';\n    case '/workspace':\n      return 'Collaborative Workspace';\n    case '/code':\n      return 'Code Intelligence';\n    case '/content':\n      return 'Content Management';\n    case '/settings':\n      return 'Settings';\n    default:\n      if (pathname.startsWith('/workspace/')) {\n        return 'Workspace';\n      }\n      return 'Redis AI Platform';\n  }\n};\n\nconst ConnectionIndicator: React.FC = () => {\n  const { isConnected } = useWebSocket();\n  \n  return (\n    <div className=\"flex items-center space-x-2\">\n      {isConnected ? (\n        <>\n          <Wifi size={16} className=\"text-success-500\" />\n          <span className=\"text-xs text-success-600 font-medium\">Connected</span>\n        </>\n      ) : (\n        <>\n          <WifiOff size={16} className=\"text-error-500\" />\n          <span className=\"text-xs text-error-600 font-medium\">Disconnected</span>\n        </>\n      )}\n    </div>\n  );\n};\n\nconst NotificationBell: React.FC = () => {\n  const { notifications } = useUIStore();\n  const unreadCount = notifications.length;\n  \n  return (\n    <button className=\"relative p-2 text-secondary-600 hover:text-secondary-900 hover:bg-secondary-100 rounded-lg transition-colors\">\n      <Bell size={20} />\n      {unreadCount > 0 && (\n        <motion.div\n          initial={{ scale: 0 }}\n          animate={{ scale: 1 }}\n          className=\"absolute -top-1 -right-1 w-5 h-5 bg-error-500 text-white text-xs rounded-full flex items-center justify-center font-medium\"\n        >\n          {unreadCount > 9 ? '9+' : unreadCount}\n        </motion.div>\n      )}\n    </button>\n  );\n};\n\nconst UserMenu: React.FC = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const { user, logout } = useAuth();\n  const { theme, setTheme, setSidebarOpen } = useUIStore();\n  \n  if (!user) return null;\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"flex items-center space-x-2 p-2 text-secondary-600 hover:text-secondary-900 hover:bg-secondary-100 rounded-lg transition-colors\"\n      >\n        <div className=\"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center\">\n          <span className=\"text-sm font-medium text-primary-700\">\n            {user.name.charAt(0).toUpperCase()}\n          </span>\n        </div>\n      </button>\n      \n      <AnimatePresence>\n        {isOpen && (\n          <>\n            {/* Backdrop */}\n            <div \n              className=\"fixed inset-0 z-10\" \n              onClick={() => setIsOpen(false)}\n            />\n            \n            {/* Menu */}\n            <motion.div\n              initial={{ opacity: 0, scale: 0.95, y: -10 }}\n              animate={{ opacity: 1, scale: 1, y: 0 }}\n              exit={{ opacity: 0, scale: 0.95, y: -10 }}\n              transition={{ duration: 0.1 }}\n              className=\"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-secondary-200 py-2 z-20\"\n            >\n              {/* User Info */}\n              <div className=\"px-4 py-3 border-b border-secondary-200\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center\">\n                    <span className=\"text-lg font-medium text-primary-700\">\n                      {user.name.charAt(0).toUpperCase()}\n                    </span>\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium text-secondary-900\">{user.name}</p>\n                    <p className=\"text-xs text-secondary-500\">{user.email}</p>\n                  </div>\n                </div>\n              </div>\n              \n              {/* Menu Items */}\n              <div className=\"py-2\">\n                <button\n                  onClick={() => {\n                    // Navigate to profile\n                    setIsOpen(false);\n                  }}\n                  className=\"w-full flex items-center space-x-3 px-4 py-2 text-sm text-secondary-700 hover:bg-secondary-50 transition-colors\"\n                >\n                  <User size={16} />\n                  <span>Profile</span>\n                </button>\n                \n                <button\n                  onClick={() => {\n                    // Navigate to settings\n                    setIsOpen(false);\n                  }}\n                  className=\"w-full flex items-center space-x-3 px-4 py-2 text-sm text-secondary-700 hover:bg-secondary-50 transition-colors\"\n                >\n                  <Settings size={16} />\n                  <span>Settings</span>\n                </button>\n                \n                <button\n                  onClick={() => {\n                    setTheme(theme === 'light' ? 'dark' : 'light');\n                    setIsOpen(false);\n                  }}\n                  className=\"w-full flex items-center space-x-3 px-4 py-2 text-sm text-secondary-700 hover:bg-secondary-50 transition-colors\"\n                >\n                  {theme === 'light' ? <Moon size={16} /> : <Sun size={16} />}\n                  <span>{theme === 'light' ? 'Dark Mode' : 'Light Mode'}</span>\n                </button>\n                \n                <div className=\"border-t border-secondary-200 my-2\" />\n                \n                <button\n                  onClick={() => {\n                    logout();\n                    setIsOpen(false);\n                  }}\n                  className=\"w-full flex items-center space-x-3 px-4 py-2 text-sm text-error-600 hover:bg-error-50 transition-colors\"\n                >\n                  <LogOut size={16} />\n                  <span>Sign Out</span>\n                </button>\n              </div>\n            </motion.div>\n          </>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nconst QuickSearch: React.FC = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  \n  return (\n    <div className=\"relative\">\n      <button\n        onClick={() => setIsOpen(true)}\n        className=\"flex items-center space-x-2 px-3 py-2 text-sm text-secondary-600 bg-secondary-100 hover:bg-secondary-200 rounded-lg transition-colors\"\n      >\n        <Search size={16} />\n        <span>Quick search...</span>\n        <kbd className=\"px-2 py-0.5 text-xs bg-secondary-200 rounded border\">\n          âŒ˜K\n        </kbd>\n      </button>\n      \n      {/* Quick Search Modal would go here */}\n    </div>\n  );\n};\n\nexport const Header: React.FC = () => {\n  const location = useLocation();\n  const { sidebarOpen, setSidebarOpen } = useUIStore();\n  const pageTitle = getPageTitle(location.pathname);\n  \n  return (\n    <header className=\"bg-white border-b border-secondary-200 px-6 py-4\">\n      <div className=\"flex items-center justify-between\">\n        {/* Left Section */}\n        <div className=\"flex items-center space-x-4\">\n          {/* Mobile Menu Button */}\n          <button\n            onClick={() => setSidebarOpen(!sidebarOpen)}\n            className=\"lg:hidden p-2 text-secondary-600 hover:text-secondary-900 hover:bg-secondary-100 rounded-lg transition-colors\"\n          >\n            <Menu size={20} />\n          </button>\n          \n          {/* Page Title */}\n          <div>\n            <h1 className=\"text-2xl font-bold text-secondary-900\">{pageTitle}</h1>\n            <p className=\"text-sm text-secondary-500 mt-0.5\">\n              AI-powered platform with real-time capabilities\n            </p>\n          </div>\n        </div>\n        \n        {/* Right Section */}\n        <div className=\"flex items-center space-x-4\">\n          {/* Quick Search */}\n          <QuickSearch />\n          \n          {/* Connection Status */}\n          <ConnectionIndicator />\n          \n          {/* System Activity */}\n          <div className=\"flex items-center space-x-2 px-3 py-2 bg-success-50 rounded-lg\">\n            <Activity size={16} className=\"text-success-600\" />\n            <span className=\"text-xs text-success-700 font-medium\">All Systems Operational</span>\n          </div>\n          \n          {/* Notifications */}\n          <NotificationBell />\n          \n          {/* User Menu */}\n          <UserMenu />\n        </div>\n      </div>\n    </header>\n  );\n};\n"